# 靶场渗透

## 术语

- POC（Proof of Concept）
  - 一种**概念验证**，旨在**证明**某个漏洞或攻击方法的存在和可利用性，通常是一个简单的示例或代码。

- EXP（Exploit）
  - 针对漏洞的攻击工具或代码，能够利用特定的安全漏洞。

## 工具

- [**nmap**](https://nmap.org/)
  - 一款强大的网络扫描和安全审计工具，广泛用于发现网络中的主机、开放端口以及服务和操作系统识别。

  ```bash
  nmap -sS 192.168.1.1
  nmap -sS -p 1-65535 192.168.1.1
  ```

- [**kscan**](https://github.com/lcvvvv/kscan)
  - 一款纯 go 开发的全方位扫描器，具备端口扫描、协议检测、指纹识别，暴力破解等功能。支持协议 1200+，协议指纹 10000+，应用指纹 20000+，暴力破解协议 10 余种。

  ```bash
  # 默认扫描TOP 400 端口，关闭存活性探测
  kscan -t 192.168.1.1 -Pn

  # 全端口 1-65535扫描，关闭存活性探测
  kscan -t 192.168.1.1 -Pn -sV 
  ```

- [**fscan**](https://github.com/shadow1ng/fscan)
  - 一款内网综合扫描工具，方便一键自动化、全方位漏扫扫描。

  ```bash
  # 扫描指定IP和常见端口
  ./fscan -h 192.168.1.1
  
  # 扫描指定IP和全部端口
  ./fscan -h 192.168.1.1 -p 1-65535
  
  # 扫描地址段
  ./fscan -h 192.168.x.x
  ```

- [nuclei](https://github.com/projectdiscovery/nuclei)
  - 基于 YAML 语法模板的定制化快速漏洞扫描器。

  ```bash
  nuclei -u https://example.com
  ```

- [xray](https://github.com/chaitin/xray)
  - 一款长亭自研的完善的安全评估工具，支持常见 web 安全问题扫描和自定义 poc。

  ```bash
  xray webscan --listen 127.0.0.1:7777 --html-output proxy.html
  ```

  ```bash
  # 扫描指定目标
  ./xpoc -t https://example.com
  ```

- [observer_ward(侦查守卫)](https://github.com/emo-crab/observer_ward)
  - Web 应用和服务指纹识别工具。

  ```bash
  ./observer_ward -t http://192.168.1.1
  ```

## Runtime.getRuntime().exec()

`Runtime.getRuntime().exec()` 是 Java 中用于执行外部命令的重要方法，允许开发者在 Java 应用程序中调用系统命令。然而，它在使用时存在一些显著限制，需谨慎考虑以下因素：  

1. **无法执行重定向和管道符**:
    - 该方法不支持使用重定向符号 (`>`) 将命令的输出重定向到文件。需要使用其他方法（如 `ProcessBuilder`）来实现输出重定向。
    - 该方法无法使用管道符号 (`|`) 将一个命令的输出直接传递给另一个命令。这限制了组合多个命令的灵活性。

2. **参数处理**:
   - 当传递命令及其参数时，必须手动处理空格、引号和特殊字符（如 `$`,`&` 等）的转义。没有正确处理可能导致命令格式错误，从而无法执行。

3. **环境变量**:
   - 执行的命令使用的是 Java 应用程序父进程的环境变量，无法直接设置或修改新的环境变量。如果需要特定的环境变量值，需通过其他方式进行设置。

为了实现执行复杂命令，如反弹 shell，需要对 payload 进行编码，<https://ares-x.com/tools/runtime-exec>
